name: Keep Render Alive

on:
  schedule:
    # Base schedule every 12 minutes
    - cron: '*/12 * * * *'

jobs:
  ping-render:
    runs-on: ubuntu-latest
    steps:
      - name: Add random delay (0-2 minutes)
        run: |
          # Generate random seconds between 0-120 (0 to 2 minutes)
          RANDOM_SECONDS=$(( RANDOM % 121 ))
          echo "⏰ Waiting $RANDOM_SECONDS seconds..."
          sleep $RANDOM_SECONDS
          echo "🚀 Starting ping after $RANDOM_SECONDS second delay"
        
      - name: Ping website
        run: |
          echo "📡 Pinging delta-arbitrage-bot..."
          curl -s -o /dev/null -w "Status: %{http_code}\n" https://delta-arbitrage-bot.onrender.com/ping
          echo "✅ Ping completed at $(date)"
          echo "🎯 Next ping in 12-14 minutes"
